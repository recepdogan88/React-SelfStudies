{"version":3,"file":"content-range.esm.js","sources":["../src/index.ts"],"sourcesContent":["interface Range {\n  unit: string;\n  start?: number | null;\n  end?: number | null;\n  size?: number | null;\n}\n\n/**\n * Format Content-Range header.\n */\nexport function format(input: Range): string | null {\n  const size = input.size != null ? input.size : \"*\";\n  const range =\n    input.start == null && input.end == null\n      ? \"*\"\n      : `${input.start}-${input.end}`;\n  if (size === \"*\" && range === \"*\") return null;\n  if (range !== \"*\" && (input.start == null || input.end == null)) return null;\n  return `${input.unit} ${range}/${size}`;\n}\n\n/**\n * Parse Content-Range header.\n */\nexport function parse(input: string): Range | null {\n  const matches = input.match(/^(\\w+) ((\\d+)-(\\d+)|\\*)\\/(\\d+|\\*)$/);\n  if (!matches) return null;\n  const [, unit, , start, end, size] = matches;\n  const range = {\n    unit,\n    start: start != null ? Number(start) : null,\n    end: end != null ? Number(end) : null,\n    size: size === \"*\" ? null : Number(size),\n  };\n  if (range.start === null && range.end === null && range.size === null)\n    return null;\n  return range;\n}\n"],"names":["format","input","size","range","start","end","unit","parse","matches","match","Number"],"mappings":"AAOA;;;SAGgBA,OAAOC;AACrB,MAAMC,IAAI,GAAGD,KAAK,CAACC,IAAN,IAAc,IAAd,GAAqBD,KAAK,CAACC,IAA3B,GAAkC,GAA/C;AACA,MAAMC,KAAK,GACTF,KAAK,CAACG,KAAN,IAAe,IAAf,IAAuBH,KAAK,CAACI,GAAN,IAAa,IAApC,GACI,GADJ,GAEOJ,KAAK,CAACG,KAFb,SAEsBH,KAAK,CAACI,GAH9B;AAIA,MAAIH,IAAI,KAAK,GAAT,IAAgBC,KAAK,KAAK,GAA9B,EAAmC,OAAO,IAAP;AACnC,MAAIA,KAAK,KAAK,GAAV,KAAkBF,KAAK,CAACG,KAAN,IAAe,IAAf,IAAuBH,KAAK,CAACI,GAAN,IAAa,IAAtD,CAAJ,EAAiE,OAAO,IAAP;AACjE,SAAUJ,KAAK,CAACK,IAAhB,SAAwBH,KAAxB,SAAiCD,IAAjC;AACD;AAED;;;;SAGgBK,MAAMN;AACpB,MAAMO,OAAO,GAAGP,KAAK,CAACQ,KAAN,CAAY,oCAAZ,CAAhB;AACA,MAAI,CAACD,OAAL,EAAc,OAAO,IAAP;AACd,MAASF,IAAT,GAAqCE,OAArC;AAAA,MAAiBJ,KAAjB,GAAqCI,OAArC;AAAA,MAAwBH,GAAxB,GAAqCG,OAArC;AAAA,MAA6BN,IAA7B,GAAqCM,OAArC;AACA,MAAML,KAAK,GAAG;AACZG,IAAAA,IAAI,EAAJA,IADY;AAEZF,IAAAA,KAAK,EAAEA,KAAK,IAAI,IAAT,GAAgBM,MAAM,CAACN,KAAD,CAAtB,GAAgC,IAF3B;AAGZC,IAAAA,GAAG,EAAEA,GAAG,IAAI,IAAP,GAAcK,MAAM,CAACL,GAAD,CAApB,GAA4B,IAHrB;AAIZH,IAAAA,IAAI,EAAEA,IAAI,KAAK,GAAT,GAAe,IAAf,GAAsBQ,MAAM,CAACR,IAAD;AAJtB,GAAd;AAMA,MAAIC,KAAK,CAACC,KAAN,KAAgB,IAAhB,IAAwBD,KAAK,CAACE,GAAN,KAAc,IAAtC,IAA8CF,KAAK,CAACD,IAAN,KAAe,IAAjE,EACE,OAAO,IAAP;AACF,SAAOC,KAAP;AACD;;;;"}